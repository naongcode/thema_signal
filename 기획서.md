# Thema Signal - 테마주 초기 상승 포착 서비스

## 1. 서비스 개요

**핵심 가치**: 테마주가 일제히 상승하기 시작하는 **초기 단계**를 포착하여, 투자자가 빠르게 대응할 수 있도록 돕는 서비스

**문제 정의**
- 테마주는 일단 상승이 시작되면 빠르게 확산됨
- 뉴스나 커뮤니티에서 화제가 될 때는 이미 늦은 경우가 많음
- 개인 투자자가 수백 개 테마를 실시간 모니터링하기 어려움

**솔루션**
- 테마 내 3~4개 종목이 일정 수익률 이상 상승하면 "테마 상승 신호" 발생
- 대장주, 다음 후보, 현재 단계, 확산도를 한눈에 제공

---

## 2. 핵심 기능

### 2.1 테마 순위 (주도 테마 판별)

**테마 순위 산정 기준**
- 각 테마의 수익률(상위 3~5개 평균)을 기준으로 전체 테마 순위 산정
- 기간별(3주/6주/9주) 순위 제공

| 기간 | 순위 기준 | 의미 |
|------|----------|------|
| 3주 순위 | 3주 수익률 기준 | 지금 가장 핫한 테마 |
| 6주 순위 | 6주 수익률 기준 | 중기 강세 테마 |
| 9주 순위 | 9주 수익률 기준 | 장기 주도 테마 |

**주도 테마 판별**
- **1위 테마** = 현재 시장 주도 테마
- 3주/6주/9주 1위가 같으면 → 확실한 주도 테마
- 3주 1위가 다르면 → 주도 테마 교체 가능성

**테마 순위 변화 해석**
| 상황 | 해석 |
|------|------|
| 3주 순위 급상승 | 새롭게 부상하는 테마, 초기 진입 기회 |
| 3주/6주/9주 모두 상위권 | 확실한 주도 테마, 지속성 있음 |
| 9주 상위 but 3주 하락 | 주도 테마 힘 빠지는 중 |
| 3주만 상위권 | 단기 테마, 지속성 확인 필요 |

### 2.2 테마 상승 감지

| 항목 | 설명 |
|------|------|
| **감지 조건** | 테마 수익률(상위 3~5개 평균)이 3주 20% 이상 OR 6주 30% 이상 |
| **감지 시점** | 장 마감 후 일괄 분석 (일 1회) |
| **알림** | 조건 충족 시 푸시/알림 발송 |

### 2.2 테마 상세 정보

#### 대장주 (기간별 + 거래대금)

**기간별 수익률 대장**
| 기간 | 의미 | 활용 |
|------|------|------|
| 3주 대장 | 최근 급등 선도주 | 단기 모멘텀, 지금 가장 핫한 종목 |
| 6주 대장 | 중기 상승 선도주 | 테마의 중심축, 안정적 흐름 |
| 9주 대장 | 장기 상승 선도주 | 테마의 본류, 꾸준한 강세 |

**대장주 변화 해석**
- 3주/6주/9주 대장이 같으면 → 확실한 대장주, 테마 안정
- 3주 대장이 다르면 → 대장주 교체 가능성, 새로운 종목 부상
- 9주 대장이 3주에서 순위 하락 → 기존 대장주 힘 빠짐

**거래대금 대장**
- 테마 내 최고 거래대금 종목 (기간: 최근 1주 평균)
- 시장의 관심(돈)이 몰리는 곳
- 수익률 대장과 다르면 주목할 신호
  - 거래대금 대장이 아직 덜 올랐다면 → 매수세 유입 중, 상승 여력
  - 수익률 대장에 거래대금이 빠지면 → 고점 신호 가능성

#### 2등주, 3등주 (기간별)

**기간별 수익률 순위**
| 기간 | 2등주 | 3등주 | 의미 |
|------|-------|-------|------|
| 3주 | 수익률 2위 | 수익률 3위 | 최근 따라오는 종목 |
| 6주 | 수익률 2위 | 수익률 3위 | 중기 추세 추종 종목 |
| 9주 | 수익률 2위 | 수익률 3위 | 장기 동반 상승 종목 |

**거래대금 기준** (최근 1주 평균)
- 거래대금 2위, 3위 종목
- 시장 관심이 분산되는 곳

**활용**
- 대장주 대비 갭이 크면 → 따라잡기 여력 있음
- 거래대금 순위 > 수익률 순위 → 매수세 유입 중, 주목
- 3주 순위가 6주/9주보다 높으면 → 최근 부상 중인 종목

#### 현재 단계

**상승 흐름** (확산도 ↑ 또는 유지, 수익률 ↑)
| 단계 | 확산도 | 수익률 추세 | 설명 |
|------|--------|------------|------|
| **0단계: 주목** | - | 상승 | 1~2개 종목만 상승, 대장주 후보 움직임 감지 |
| **1단계: 초기** | 0~20% | 상승 | 3개 이상 상승, 테마 형성 시작 |
| **2단계: 확산** | 20~50% | 상승 | 테마로 인식되기 시작, 2~3등주 합류 |
| **3단계: 과열** | 50%+ | 상승 | 대부분 종목 상승, 뉴스/커뮤니티 화제 |

**0단계(주목)의 의미**
- 아직 테마 상승이라고 확정하기 어려움 (개별 이슈일 수 있음)
- 하지만 대장주 후보가 먼저 움직이는 경우가 많음
- "관심 목록"에 추가하고 추이 지켜보기
- 3개 이상 상승 시 → 1단계로 승격, 테마 신호 발생

**하락 전환** (수익률 ↓ 전환 시)
| 단계 | 이전 상태 | 수익률 추세 | 설명 |
|------|----------|------------|------|
| **0단계 → 소멸** | 주목 | 하락 전환 | 개별 이슈로 끝남, 테마 아니었음 |
| **1단계 → 소멸** | 초기 | 하락 전환 | 테마 형성 실패 |
| **2단계 → 정리** | 확산 | 하락 전환 | 확산 중 꺾임, 빠른 대응 필요 |
| **3단계 → 정리** | 과열 | 하락 전환 | 자연스러운 차익실현 구간 |

**테마 수익률 계산 방식**
- 전체 종목 평균 X → 상위 3~5개 종목 평균 O
- 이유: 전체 평균은 안 오른 종목에 희석됨, 1~2개만 보면 테마인지 개별 이슈인지 구분 어려움
- 상위 3~5개가 함께 오르면 "테마로 움직인다"고 판단 가능

**수익률 꺾임 판단 기준**

| 방식 | 판단 기준 | 장점 | 단점 |
|------|----------|------|------|
| **전일 대비** | 오늘 테마 수익률 < 어제 테마 수익률 | 단순, 빠른 감지 | 노이즈에 민감 |
| **고점 대비** | 현재 수익률 < 최근 N일 고점 - X% | 명확한 하락 확인 | 감지 지연 |
| **이동평균** | 현재 수익률 < 3일 이동평균 | 노이즈 필터링 | 후행성 |
| **연속 하락** | 2~3일 연속 수익률 감소 | 확실한 추세 전환 | 늦을 수 있음 |

※ 위 테마 수익률은 모두 "상위 3~5개 평균"을 기준으로 함

**권장: 복합 조건**
```
꺾임 판정 = 다음 중 하나 이상 충족
  1) 전일 대비 수익률 -3%p 이상 하락
  2) 고점 대비 -5%p 이상 하락
  3) 2일 연속 수익률 감소
```

**단계 판정 로직**
```
IF 꺾임 판정 = TRUE
  → 현재 단계 + "정리" 또는 "소멸"
ELSE
  → 확산도 기준으로 1/2/3단계 판정
```

#### 확산도

**정의**: 테마 내 전체 종목 수 대비 **기준 수익률 이상 상승한 종목 비율**

**기간별 확산도** (테마 상승 판단 기준과 동일하게 적용)
| 기준 | 상승 종목 판정 | 예시 |
|------|--------------|------|
| 단기 (3주) | 3주간 누적 10% 이상 | 12개 중 5개 → 42% |
| 중기 (6주) | 6주간 누적 15% 이상 | 12개 중 4개 → 33% |

- 단기/중기 중 높은 확산도를 대표값으로 사용
- 확산도가 높아질수록 진입 리스크 증가 신호

**확산도 기준 수익률** (파라미터)
| 기간 | 테마 상승 기준 | 개별 종목 상승 기준 |
|------|--------------|-------------------|
| 3주 | 20% (상위 3~5개 평균) | 10% (개별) |
| 6주 | 30% (상위 3~5개 평균) | 15% (개별) |

※ 테마 기준의 약 절반을 개별 종목 기준으로 설정 (조정 가능)

---

## 3. 주요 화면 구성

### 3.1 메인 대시보드 (테마 순위)
```
┌─────────────────────────────────────────────┐
│  🏆 테마 순위 (3주 기준)                     │
├─────────────────────────────────────────────┤
│  1위 [2차전지]  +32%  2단계  확산도 35%     │
│      3주 1위 / 6주 1위 / 9주 2위            │
│      대장주: 에코프로 (+25%)                 │
├─────────────────────────────────────────────┤
│  2위 [AI반도체]  +28%  2단계  확산도 30%    │
│      3주 2위 / 6주 3위 / 9주 5위 ↑급상승    │
│      대장주: SK하이닉스 (+22%)               │
├─────────────────────────────────────────────┤
│  3위 [로봇]  +24%  3단계  확산도 72% ⚠️과열 │
│      3주 3위 / 6주 2위 / 9주 1위 ↓하락중    │
│      대장주: 레인보우로보틱스 (+18%)         │
└─────────────────────────────────────────────┘
```

### 3.2 테마 상세 페이지
```
┌─────────────────────────────────────────────┐
│  2차전지 테마                                │
│  현재 단계: 2단계 (확산)                     │
│  확산도: 3주 35% / 6주 28%                   │
├─────────────────────────────────────────────┤
│  👑 대장주                                   │
│  3주: 에코프로 (+25%)                        │
│  6주: 에코프로 (+38%)                        │
│  9주: 포스코퓨처M (+42%)                     │
│  거래대금: 에코프로비엠                       │
├─────────────────────────────────────────────┤
│  📈 종목별 현황 (3주 기준)                   │
│  ┌────────────────────────────────────────┐ │
│  │ 순위 │ 종목명      │ 3주   │ 6주   │ 9주  │ │
│  │  1  │ 에코프로     │ +25%  │ +38%  │ +35% │ │
│  │  2  │ 에코프로비엠 │ +18%  │ +22%  │ +28% │ │
│  │  3  │ 포스코퓨처M  │ +12%  │ +30%  │ +42% │ │
│  │  4  │ 엘앤에프     │ +8%   │ +15%  │ +18% │ │
│  │  5  │ 삼성SDI     │ +2%   │ +5%   │ +8%  │ │
│  └────────────────────────────────────────┘ │
├─────────────────────────────────────────────┤
│  📊 단계 히스토리                            │
│  1/15 - 0단계 진입 (에코프로 단독 상승)      │
│  1/18 - 1단계 진입 (3개 종목 상승)           │
│  1/22 - 2단계 진입 (확산도 20% 돌파)         │
└─────────────────────────────────────────────┘
```

### 3.3 알림 설정
- 특정 테마 신호 발생 시 알림
- 특정 단계 진입 시 알림 (예: 1단계 → 2단계)
- 관심 종목이 포함된 테마 상승 시 알림

---

## 4. 테마 상승 판단 로직

### 4.1 기본 조건
```
IF 테마 수익률(상위 3~5개 평균)이
   3주간 누적 20% 이상 OR 6주간 누적 30% 이상
THEN 테마 상승 신호 발생
```

**2가지 기준을 쓰는 이유**
| 기준 | 포착 대상 | 특징 |
|------|----------|------|
| 3주 20% | 빠르게 급등하는 테마 | 초기 진입 기회, 단기 모멘텀 |
| 6주 30% | 천천히 오르는 테마 | 오르락내리락해도 잡힘, 중기 추세 |

- 둘 중 하나만 충족해도 신호 발생
- 둘 다 충족하면 더 강한 신호로 표시 가능

### 4.2 파라미터 (조정 가능)
| 파라미터 | 기본값 | 설명 |
|---------|--------|------|
| 단기 측정 기간 | 3주 (15 거래일) | 급등 테마 포착용 |
| 단기 기준 수익률 | 20% | 3주 기준 |
| 중기 측정 기간 | 6주 (30 거래일) | 완만한 상승 테마 포착용 |
| 중기 기준 수익률 | 30% | 6주 기준 |
| 평균 대상 | 상위 3~5개 | 테마 수익률 계산에 사용할 종목 수 |

### 4.3 단계 판정 기준

**상승 흐름** (확산도 기준)
| 단계 | 확산도 | 설명 |
|------|--------|------|
| 0단계: 주목 | 1~2개 종목만 상승 | 대장주 후보 움직임, 테마 미확정 |
| 1단계: 초기 | 0~20% | 3개 이상 상승, 테마 형성 시작 |
| 2단계: 확산 | 20~50% | 테마 인식, 2~3등주 합류 |
| 3단계: 과열 | 50%+ | 대부분 상승, 뉴스/커뮤니티 화제 |

**하락 전환** (꺾임 판정 시)
| 이전 단계 | 전환 후 | 설명 |
|----------|--------|------|
| 0단계 | 소멸 | 개별 이슈로 끝남 |
| 1단계 | 소멸 | 테마 형성 실패 |
| 2~3단계 | 정리 | 차익실현/하락 구간 |

---

## 5. 사용자 시나리오

### 시나리오 1: 테마 초기 진입
1. 사용자가 "2차전지 테마 1단계 진입" 알림 수신
2. 앱에서 대장주(에코프로) 확인
3. 다음 후보(포스코퓨처M) 중 관심 종목 선정
4. 확산도 모니터링하며 진입 타이밍 결정

### 시나리오 2: 과열 경고
1. 보유 중인 테마가 3단계(과열) 진입
2. "확산도 72%, 과열 주의" 알림 수신
3. 차익실현 여부 판단

### 시나리오 3: 테마 탐색
1. 메인 대시보드에서 현재 상승 중인 테마 확인
2. 1~2단계 테마 중 관심 분야 선택
3. 상세 페이지에서 종목별 현황 분석

---

## 6. 핵심 지표 정의

| 지표 | 정의 | 용도 |
|------|------|------|
| **수익률 대장** | 테마 내 최고 수익률 종목 | 테마 상승 강도 판단 |
| **거래대금 대장** | 테마 내 최고 거래대금 종목 | 시장 관심 집중도 판단 |
| **대장 일치 여부** | 수익률 대장 = 거래대금 대장인지 | 테마 안정성/변곡점 판단 |
| **확산도** | 기준 수익률 이상 종목 수 / 전체 종목 수 × 100 (3주 10%, 6주 15% 기준) | 테마 과열도 판단 |
| **테마 수익률** | 테마 내 상위 3~5개 종목 평균 수익률 | 테마 강도 판단 |
| **갭 비율** | (대장주 수익률 - 후보 수익률) / 대장주 수익률 | 후보 매력도 판단 |

---

## 7. 차별화 포인트

1. **초기 포착**: 뉴스/커뮤니티보다 빠른 데이터 기반 감지
2. **단계별 시각화**: 현재 테마가 어느 단계인지 직관적 파악
3. **다음 후보 제시**: 대장주 외 투자 대안 제공
4. **확산도 지표**: 진입/청산 타이밍 판단 근거 제공
